# Использование UI engine

## Основные типы элементов

UI engine предоставляет некоторые элементы из коробки.  
Вы можете использовать их напрямую, либо наследоваться от них.

### AbstractElement

Все элементы наследуются от AbstractElement, а следовательно имеют все его свойства.

#### offset

Самый простой способ управлять положением элементов - сдвигать их по пикселям.

`offset = 1.0 x 2.0` сдвинет элемент вправо на 1 пиксель и вниз на 2.

Однако, абсолютное измерение offset полезно только для небольших корректировок позиции элемента.  
Для расположения элементов на экране / внутри других элементов следует использовать align и origin.

#### align

Сдвиг элемента в процентах относительно родителя (или экрана)

Один из главных концептов HudRenderer - origin и align.
Они служат для упрощения разработки адаптивных интерфейсов:
У всех игроков разные размеры экрана и интерфейса, поэтому сдвиги в пикселях не работают для всех.

Align позволяет расположить элемент в той или иной точке родителя в процентах, а не в абсолютных пикселях.

В объекте Relative есть 99% того, что вы когда-либо будете использовать для значений align и origin

К примеру `Relative.CENTER` равен `V3(0.5, 0.5)`,
что соответствует сдвигу на 50% вправо и вниз относительно размера родителя

#### origin

Сдвиг элемента в процентах относительно самого себя.

origin - своего рода "точка крепления" элемента к родителю.  
Изначально origin равен 0; 0 = `Relative.TOP_LEFT`, элемент крепится к родителю за свой левый верхний угол

Например чтобы центрировать элемент по обеим осям,
нужно поставить и `align = Relative.CENTER`, и `origin = Relative.CENTER`

Песочница для настройки offset, align и origin, доступна [здесь](https://delfikpro.github.io/origin).

#### rotation

Элементы можно поворачивать.

`rotation.degrees` меняет угол поворота в градусах.

#### color

Элементам можно менять цвет.

HudRenderer предоставляет три заранее заготовленных цвета: TRANSPARENT, BLACK и WHITE.

Вы можете создавать свои цвета, вызывая различные конструкторы класса `Color`, например:
```kotlin
 element.color = Color(red = 255, green = 100, blue = 0, alpha = 0.5)
```

Вы можете изменять как отдельные компоненты цвета у элементов, так и цвет целиком
```kotlin
 element.color.alpha = 1.0
 element.color.red = 0
 element.color = WHITE
```

#### onClick и onHover

Элементам (как в HUD, так и в мире) можно добавить слушатели наведения и кликов.

onLeftClick имеет тип `ClickHandler` и принимает состояние нажатия (есть/нет) а так-же координаты курсора.
onRightClick имеет тип `ClickHandler` и принимает состояние нажатия (есть/нет) а так-же координаты курсора.

onHover имеет тип `HoverHandler` и принимает состояние наведения (есть/нет) а так-же координаты курсора.

Оба слушателя вызываются как при наводке/нажатии мыши, так и при отводке/отжатии.





### TextElement

Элемент, использующийся для рендера текста.  
Вы можете менять содержимое элемента, меняя свойство `content`.  
Ширина элемента будет изменяться в соответствии с контентом.

### ColorTextElement

Элемент, использующийся для рендера текста с цветом.
Вы можете менять содержимое элемента, меняя свойство `content`.
Так-же в `context` можно указать цвет текста.
Пример: `&4Банк &f- это &4место&f, где вы можете хранить &3свои &4деньги&f.`
Цвета текста указываются в формате `&<код цвета>`, где код цвета от Bukkit.

### RectangleElement

Двухмерные прямоугольники могут содержать внутри себя дочерние элементы,
что делает их невероятно полезными при разработке интерфейсов.

У прямоугольников, помимо основных свойств элемента, есть свойства size, texture и children

#### size

Вы можете указать размер прямоугольника в пикселях, меняя параметр size.

Положительный размер увеличивает прямоугольник вправо и вниз, отрицательный - влево и вверх.

#### texture

Используя прямоугольники, можно рендерить на экране текстуры.

Параметр texture имеет тип Identifier и принимает путь к текстуре в формате `namespace:path/to/texture`.

#### children

RectangleElement реализует интерфейс Parent, а следовательно может содержать дочерние элементы.

Добавить дочерний элемент можно методом `addChild(...)`, удалить - `removeChild(...)`

Так-же можно использовать + и - для добавления и удаления дочерних элементов.

Align дочерних элементов задаётся относительно размера самого RectangleElement, подробнее см. align.

Дочерние элементы отображаются в том порядке, в котором они были добавлены.

Дочерние элементы наследуют все трансформации родителя. 

В качестве примера приведён код, добавляющий в центр экрана прямоугольник,
в левом верхнем углу которого есть надпись "Привет, мир!"

```kotlin
HudManager.addElement(rectangle {
  size = 100.0 x 150.0
  color = BLACK
  align = CENTER
  origin = CENTER
  +text {
      content = "Привет, мир!"
      offset = V3(1.0, 1.0)
  }
})
```